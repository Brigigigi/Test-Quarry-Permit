<%- include('../partials/head') %>

<div class="flex items-center justify-between">
  <h1 class="text-xl font-semibold">Admin Dashboard</h1>
  <form method="post" action="/admin/logout">
    <button class="px-3 py-1.5 rounded border border-slate-300 text-slate-700">Logout</button>
  </form>
  </div>

<div class="grid md:grid-cols-2 gap-6 mt-4">
  <% for (const [status, items] of Object.entries(byStatus)) { %>
    <div class="bg-white rounded-lg shadow p-4">
      <div class="flex items-center justify-between">
        <h2 class="font-semibold"><%= status %></h2>
        <span class="text-sm text-slate-500"><%= items.length %></span>
      </div>
      <div class="mt-3 divide-y">
        <% if (items.length === 0) { %>
          <div class="text-sm text-slate-500">No applications</div>
        <% } %>
        <% items.forEach(a => { %>
          <a class="block py-2 hover:bg-slate-50 rounded" href="/admin/applications/<%= a.id %>">
            <div class="flex items-center justify-between">
              <div>
                <p class="font-medium"><%= a.applicant.fullName %></p>
                <p class="text-sm text-slate-600">Code: <span class="font-mono"><%= a.trackingCode %></span> â€¢ <%= new Date(a.submissionDate).toLocaleString() %></p>
              </div>
              <div class="text-sm text-slate-500"><%= a.quarry.municipality %></div>
            </div>
          </a>
        <% }) %>
      </div>
    </div>
  <% } %>
</div>

<%- include('../partials/foot') %>

